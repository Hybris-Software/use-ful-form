"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");const r=(e,r)=>e!==r.password?[!1,"Passwords do not match"]:[!0,null],t=e=>{if("string"!=typeof e)return[!1,"Invalid email"];return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLowerCase())?[!0,null]:[!1,"Invalid email"]},a=e=>"string"!=typeof e?[!1,{message:"Invalid password",security:"none"}]:e.length<=8||!e.match(/[a-z]/i)?[!1,{message:"Password must be at least 8 characters long and one lowercase letter",security:"none"}]:e.match(/[0-9]/)?e.match(/[A-Z]/)?e.match(/[^a-zA-Z0-9]/g)?[!0,{security:"strong"}]:[!1,{message:"Password must contain at least one special character",security:"high"}]:[!1,{message:"Password must contain at least one uppercase letter",security:"medium"}]:[!1,{message:"Password must contain at least one number",security:"low"}],o=e=>!0===e,s=e=>"string"==typeof e&&(null!=e&&""!==e.trim()),i=e=>"number"==typeof e&&!isNaN(e),n=e=>{if(null==e)return!1;switch(typeof e){case"string":return s(e);case"number":return i(e);case"boolean":return o(e);default:return!1}},u=e=>null==e?e:e.toString().toLowerCase().replace(" ",""),l=e=>null==e?e:e.toString().toLowerCase().replace(/[^a-z0-9\_\.]/g,""),d={["email"]:{value:"",validator:t,formatter:u,requiredValidator:s},["username"]:{value:"",validator:void 0,formatter:l,requiredValidator:s},["password"]:{value:"",validator:a,formatter:void 0,requiredValidator:s},["confirmPassword"]:{value:"",validator:r,formatter:void 0,requiredValidator:s},["checkbox"]:{value:!1,validator:void 0,formatter:void 0,requiredValidator:o}},c=(e,r)=>void 0!==r?r:void 0===e?void 0:void 0!==d[e]?d[e].formatter:void 0,v=({inputs:r,onSubmit:t})=>{const a=Object.keys(r).reduce(((e,t)=>{var a,o;return e[t]=(a=r[t].nature,void 0!==(o=r[t].value)?o:void 0===a?"":void 0!==d[a]?d[a].value:""),e}),{}),o=Object.keys(r).reduce(((e,t)=>(r[t].value&&""!==r[t].value&&!1!==r[t].value?e[t]=!0:e[t]=!1,e)),{}),[s,i]=e.useState(a),[u,l]=e.useState({}),[v,m]=e.useState(o);e.useEffect((()=>{f(s)}),[s]);const p=e=>{const t=Object.keys(r).find((t=>r[t].apiName===e||t===e));return t||(console.warn(`Input with apiName ${e} not found`),null)},f=e=>{const t={};return Object.entries(r).forEach((([r,a])=>{if(a.required&&!(o=a.nature,void 0!==o&&void 0!==d[o]?d[o].requiredValidator:n)(e[r]))return void(t[r]=[!1,"This field is required"]);var o;const s=((e,r)=>void 0!==r?r:void 0===e?void 0:void 0!==d[e]?d[e].validator:void 0)(a.nature,a.validator);t[r]=s?s(e[r],e):[!0,null]})),l(t),t},y=(e,t,a=!1)=>{if(!r[e])throw new Error(`Input with key ${e} not found`);const o=c(r[e].nature,r[e].formatter),s=o?o(t):t;i((r=>({...r,[e]:s}))),a&&m((r=>({...r,[e]:!0})))},w=e=>{m((r=>({...r,[e]:!1}))),i((r=>({...r,[e]:a[e]})))},h=()=>{const e=Object.keys(r).reduce(((e,r)=>(e[r]=!0,e)),{});m(e)},b=e=>v[e]&&u[e]?u[e]:[null,null],g=e=>{"Enter"===e.key&&x()},V=e.useMemo((()=>Object.keys(u).length==Object.keys(r).length&&Object.keys(u).every((e=>u[e]&&!0===u[e][0]))),[u]),j=()=>(h(),V),k=()=>Object.keys(r).reduce(((e,t)=>{if(!1!==r[t].sendToApi){e[r[t].apiName||t]=s[t]}return e}),{}),x=()=>{j()&&t({data:s,apiBody:k()})};return{values:s,setInputValue:y,errors:u,setInputError:(e,t)=>{if(!r[e])throw new Error(`Input with key ${e} not found`);l((r=>({...r,[e]:[!1,t]}))),m((r=>({...r,[e]:!0})))},getInputProps:(e,r)=>({value:s[e],setValue:(r,t)=>y(e,r,t),isValid:b(e)[0]||!0,errorDetails:b(e)[1],setShowErrors:()=>m((r=>({...r,[e]:!0}))),resetInput:()=>w(e),submitForm:x,...r?.handleKeyDown&&{onKeyDown:g}}),resetInput:w,isValid:V,validate:j,reset:()=>{m({}),i(a)},submit:x,getApiBody:k,fetchApiErrors:e=>{const r=Object.keys(e).reduce(((r,t)=>{const a=p(t);return a?(r[a]=[!1,Array.isArray(e[t])?e[t].join(" "):e[t]],r):r}),{});l((e=>({...e,...r}))),h()},fetchApiValues:(e,{include:r,exclude:t}={})=>{let a=Object.keys(e);r&&(a=a.filter((e=>r.includes(e)))),t&&(a=a.filter((e=>!t.includes(e))));const o=a.reduce(((r,t)=>{const a=p(t);return a?(r[a]=e[t],r):r}),{});i((e=>({...e,...o}))),m((e=>({...e,...Object.keys(o).reduce(((e,r)=>(e[r]=!0,e)),{})})))},pushApiError:(e,r)=>{const t=p(e);if(!t)return;const a=Array.isArray(r)?r.join(" "):r;l((e=>({...e,[t]:[!1,a]})))},pushApiValue:(e,t)=>{const a=p(e);if(!a)return;const o=c(r[a].nature,r[a].formatter),s=o?o(t):t;i((e=>({...e,[a]:s}))),m((e=>({...e,[a]:!0})))}}};exports.default=v,exports.formatEmail=u,exports.formatLowerCase=e=>null==e?e:e.toString().toLowerCase(),exports.formatUsername=l,exports.requiredBooleanValidator=o,exports.requiredNumberValidator=i,exports.requiredStringValidator=s,exports.requiredValidator=n,exports.useForm=v,exports.validateConfirmPassword=r,exports.validateEmail=t,exports.validatePassword=a;
//# sourceMappingURL=index.cjs.js.map
